{% comment %}
====================================================================
ğŸ¯ é›†åˆé¡µé¢SEOä¼˜åŒ–å™¨ - Collection SEO Optimizer
====================================================================

ä¸“ä¸ºé›†åˆé¡µé¢è®¾è®¡çš„SEOä¼˜åŒ–ç³»ç»Ÿï¼Œè‡ªåŠ¨ç”Ÿæˆé’ˆå¯¹ç‰¹å®šå…³é”®è¯çš„ä¼˜åŒ–å†…å®¹ã€‚
ä¸ºæ¯ä¸ªé›†åˆé¡µé¢æä¾›æœ€ä½³çš„SEOæ ‡é¢˜ã€æè¿°å’Œç»“æ„åŒ–æ•°æ®ã€‚

ä½¿ç”¨æ–¹å¼ï¼šåœ¨collection.liquidæ¨¡æ¿ä¸­åŒ…å«æ­¤ç‰‡æ®µ
{% include 'collection-seo-optimizer' %}

====================================================================
{% endcomment %}

{% comment %} ğŸ” æ”¶é›†å½“å‰é¡µé¢ä¿¡æ¯ {% endcomment %}
{% assign current_collection = collection %}
{% assign collection_handle = collection.handle %}
{% assign collection_title = collection.title %}

{% comment %} ğŸ“ å…³é”®è¯æ˜ å°„å­—å…¸ - é’ˆå¯¹é›†åˆé¡µé¢ä¼˜åŒ– {% endcomment %}
{% assign collection_keywords = '' %}
{% assign seo_title = '' %}
{% assign seo_description = '' %}
{% assign target_keywords = '' %}

{% comment %} ğŸ·ï¸ æ ¸å¿ƒå…³é”®è¯é›†åˆè¯†åˆ« {% endcomment %}
{% case collection_handle %}
  {% when 'jiraikei', 'jirai', 'åœ°é›·ç³»' %}
    {% assign target_keywords = 'åœ°é›·ç³»,åœ°é›·ç³»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,åœ°é›·ç³»å¥³å­,jiraikei,jiraikei fashion,jiraikei girl,åœ°é›·ç³»ã‚³ãƒ¼ãƒ‡,åœ°é›·ç³»æœè£…,åœ°é›·ç³»é€šè²©' %}
    {% assign seo_title = 'åœ°é›·ç³»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© | åœ°é›·ç³»å¥³å­ã«äººæ°—ã®ã‚¢ã‚¤ãƒ†ãƒ  - ' | append: shop.name %}
    {% assign seo_description = 'åœ°é›·ç³»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚åœ°é›·ç³»å¥³å­ã«äººæ°—ã®æœè£…ãƒ»ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ã‚’è±Šå¯Œã«å–ã‚Šæƒãˆã€‚ç—…ã¿ã‹ã‚ã„ã„ãƒ»ã‚†ã‚ã‹ã‚ã„ã„ç³»ã‚¢ã‚¤ãƒ†ãƒ ã‚‚å¤šæ•°ã€‚é€æ–™ç„¡æ–™ãƒ»å³æ—¥ç™ºé€å¯¾å¿œã€‚' %}

  {% when 'ryousangata', 'ryousan', 'é‡ç”£å‹' %}
    {% assign target_keywords = 'é‡ç”£å‹,é‡ç”£å‹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,é‡ç”£å‹ãƒ²ã‚¿ã‚¯,ryousangata,é‡ç”£å‹ã‚³ãƒ¼ãƒ‡,é‡ç”£å‹æœè£…,é‡ç”£å‹é€šè²©,é‡ç”£å¥³å­' %}
    {% assign seo_title = 'é‡ç”£å‹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© | é‡ç”£å‹ãƒ²ã‚¿ã‚¯ã«äººæ°—ã®æœè£… - ' | append: shop.name %}
    {% assign seo_description = 'é‡ç”£å‹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚é‡ç”£å‹ãƒ²ã‚¿ã‚¯ã«äººæ°—ã®å¯æ„›ã„æœè£…ãƒ»ã‚³ãƒ¼ãƒ‡ã‚¢ã‚¤ãƒ†ãƒ ã‚’å¤šæ•°å–ã‚Šæƒãˆã€‚ãƒ—ãƒãƒ—ãƒ©ã‹ã‚‰æœ¬æ ¼æ´¾ã¾ã§è±Šå¯Œãªå“æƒãˆã€‚' %}

  {% when 'yamikawaii', 'yami', 'ç—…ã¿ã‹ã‚ã„ã„' %}
    {% assign target_keywords = 'ç—…ã¿ã‹ã‚ã„ã„,ç—…ã¿ã‹ã‚ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,yamikawaii,ç—…ã¿å¯æ„›ã„,ç—…ã¿ã‹ã‚ã‚³ãƒ¼ãƒ‡,ç—…ã¿ã‹ã‚æœè£…' %}
    {% assign seo_title = 'ç—…ã¿ã‹ã‚ã„ã„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© | ç—…ã¿ã‹ã‚ã‚¢ã‚¤ãƒ†ãƒ å°‚é–€ - ' | append: shop.name %}
    {% assign seo_description = 'ç—…ã¿ã‹ã‚ã„ã„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚ç—…ã¿ã‹ã‚ãƒ»ãƒ€ãƒ¼ã‚¯ã‚­ãƒ¥ãƒ¼ãƒˆç³»ã®æœè£…ã‚¢ã‚¤ãƒ†ãƒ ã‚’è±Šå¯Œã«å–ã‚Šæƒãˆã€‚å€‹æ€§çš„ã§å¯æ„›ã„ç—…ã¿ã‹ã‚ã‚³ãƒ¼ãƒ‡ã‚’ææ¡ˆã€‚' %}

  {% when 'kawaii', 'cute', 'ã‹ã‚ã„ã„' %}
    {% assign target_keywords = 'ã‹ã‚ã„ã„æœè£…,kawaii fashion,å¯æ„›ã„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,kawaii,ã‚­ãƒ¥ãƒ¼ãƒˆãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,å¯æ„›ã„é€šè²©' %}
    {% assign seo_title = 'ã‹ã‚ã„ã„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© | Kawaiiå¯æ„›ã„æœè£…å°‚é–€ - ' | append: shop.name %}
    {% assign seo_description = 'ã‹ã‚ã„ã„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚kawaiiç³»ãƒ»ã‚­ãƒ¥ãƒ¼ãƒˆç³»ã®å¯æ„›ã„æœè£…ã‚¢ã‚¤ãƒ†ãƒ ã‚’å¤šæ•°å–ã‚Šæƒãˆã€‚å¥³ã®å­ã‚‰ã—ã„å¯æ„›ã„ã‚³ãƒ¼ãƒ‡ã‚’ææ¡ˆã€‚' %}

  {% when 'gothic', 'goth', 'ã‚´ã‚·ãƒƒã‚¯' %}
    {% assign target_keywords = 'ã‚´ã‚·ãƒƒã‚¯ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,gothic fashion,ã‚´ã‚¹ãƒ­ãƒª,gothic lolita,ãƒ€ãƒ¼ã‚¯ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,é»’ã„æœè£…' %}
    {% assign seo_title = 'ã‚´ã‚·ãƒƒã‚¯ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© | Gothicç³»æœè£…å°‚é–€ - ' | append: shop.name %}
    {% assign seo_description = 'ã‚´ã‚·ãƒƒã‚¯ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚gothicãƒ»ã‚´ã‚¹ãƒ­ãƒªç³»ã®æœè£…ã‚¢ã‚¤ãƒ†ãƒ ã‚’è±Šå¯Œã«å–ã‚Šæƒãˆã€‚ãƒ€ãƒ¼ã‚¯&ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆãªã‚³ãƒ¼ãƒ‡ã‚’ææ¡ˆã€‚' %}

  {% when 'harajuku', 'åŸå®¿' %}
    {% assign target_keywords = 'åŸå®¿ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,harajuku fashion,åŸå®¿ç³»,åŸå®¿ã‚¹ã‚¿ã‚¤ãƒ«,å€‹æ€§çš„ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,æ´¾æ‰‹å¯æ„›ã„' %}
    {% assign seo_title = 'åŸå®¿ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© | Harajukuç³»å€‹æ€§æ´¾æœè£… - ' | append: shop.name %}
    {% assign seo_description = 'åŸå®¿ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚harajukuç³»ãƒ»å€‹æ€§çš„ã§æ´¾æ‰‹å¯æ„›ã„æœè£…ã‚¢ã‚¤ãƒ†ãƒ ã‚’å¤šæ•°å–ã‚Šæƒãˆã€‚åŸå®¿ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚³ãƒ¼ãƒ‡ã‚’ææ¡ˆã€‚' %}

  {% else %}
    {% comment %} ğŸ” ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®å‹•çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œå‡º {% endcomment %}
    {% assign detected_keywords = '' %}
    {% assign keyword_tags = 'åœ°é›·ç³»,é‡ç”£å‹,ç—…ã¿ã‹ã‚ã„ã„,ã‚´ã‚·ãƒƒã‚¯,åŸå®¿,kawaii,jiraikei,ryousangata,yamikawaii,gothic,harajuku' | split: ',' %}
    
    {% for tag in collection.all_tags %}
      {% assign tag_lower = tag | downcase %}
      {% for keyword in keyword_tags %}
        {% if tag_lower contains keyword %}
          {% unless detected_keywords contains keyword %}
            {% if detected_keywords != '' %}
              {% assign detected_keywords = detected_keywords | append: ',' %}
            {% endif %}
            {% assign detected_keywords = detected_keywords | append: keyword %}
          {% endunless %}
        {% endif %}
      {% endfor %}
    {% endfor %}
    
    {% if detected_keywords != '' %}
      {% assign target_keywords = detected_keywords %}
      {% assign seo_title = collection_title | append: ' | æ—¥ç³»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© - ' | append: shop.name %}
      {% assign seo_description = collection_title | append: 'ã®æœè£…ã‚¢ã‚¤ãƒ†ãƒ ã‚’è±Šå¯Œã«å–ã‚Šæƒãˆã€‚' | append: detected_keywords | append: 'ç³»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å°‚é–€é€šè²©ã€‚é«˜å“è³ªã§å¯æ„›ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’å¤šæ•°ã”ç”¨æ„ã€‚' %}
    {% else %}
      {% assign target_keywords = collection_title | append: ',ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³,æœè£…,é€šè²©' %}
      {% assign seo_title = collection_title | append: ' | ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²© - ' | append: shop.name %}
      {% assign seo_description = collection_title | append: 'ã®å•†å“ã‚’è±Šå¯Œã«å–ã‚ŠæƒãˆãŸãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³é€šè²©ã‚µã‚¤ãƒˆã€‚é«˜å“è³ªãªã‚¢ã‚¤ãƒ†ãƒ ã‚’å¤šæ•°ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚' %}
    {% endif %}
{% endcase %}

{% comment %} ğŸ¯ Meta Tags ç”Ÿæˆ {% endcomment %}
<title>{{ seo_title }}</title>
<meta name="description" content="{{ seo_description }}">
<meta name="keywords" content="{{ target_keywords }}">

{% comment %} ğŸŒ Open Graph Tags {% endcomment %}
<meta property="og:title" content="{{ seo_title }}">
<meta property="og:description" content="{{ seo_description }}">
<meta property="og:type" content="website">
<meta property="og:url" content="{{ shop.url }}{{ collection.url }}">
{% if collection.image %}
<meta property="og:image" content="{{ collection.image | img_url: '1200x630' }}">
{% elsif collection.products.first.featured_image %}
<meta property="og:image" content="{{ collection.products.first.featured_image | img_url: '1200x630' }}">
{% endif %}

{% comment %} ğŸ¦ Twitter Card Tags {% endcomment %}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ seo_title }}">
<meta name="twitter:description" content="{{ seo_description }}">
{% if collection.image %}
<meta name="twitter:image" content="{{ collection.image | img_url: '1200x630' }}">
{% elsif collection.products.first.featured_image %}
<meta name="twitter:image" content="{{ collection.products.first.featured_image | img_url: '1200x630' }}">
{% endif %}

{% comment %} ğŸ“Š JSON-LD ç»“æ„åŒ–æ•°æ® {% endcomment %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "{{ collection.title }}",
  "description": "{{ seo_description }}",
  "url": "{{ shop.url }}{{ collection.url }}",
  "mainEntity": {
    "@type": "ItemList",
    "numberOfItems": {{ collection.products_count }},
    "itemListElement": [
      {% for product in collection.products limit: 10 %}
      {
        "@type": "Product",
        "position": {{ forloop.index }},
        "name": "{{ product.title | escape }}",
        "url": "{{ shop.url }}{{ product.url }}",
        "image": "{{ product.featured_image | img_url: '600x600' }}",
        {% if product.price %}
        "offers": {
          "@type": "Offer",
          "price": "{{ product.price | money_without_currency }}",
          "priceCurrency": "{{ shop.currency }}",
          "availability": "{% if product.available %}InStock{% else %}OutOfStock{% endif %}"
        },
        {% endif %}
        "brand": {
          "@type": "Brand",
          "name": "{{ shop.name }}"
        }
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  },
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "ãƒ›ãƒ¼ãƒ ",
        "item": "{{ shop.url }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ collection.title }}",
        "item": "{{ shop.url }}{{ collection.url }}"
      }
    ]
  }
}
</script>

{% comment %} ğŸ”— è¿½åŠ çš„SEOä¼˜åŒ–æ ‡ç­¾ {% endcomment %}
{% comment %} Canonical URL {% endcomment %}
<link rel="canonical" href="{{ shop.url }}{{ collection.url }}">

{% comment %} Hreflang for international versions {% endcomment %}
<link rel="alternate" hreflang="ja" href="{{ shop.url }}{{ collection.url }}">
<link rel="alternate" hreflang="en" href="{{ shop.url }}{{ collection.url }}?locale=en">
<link rel="alternate" hreflang="x-default" href="{{ shop.url }}{{ collection.url }}">

{% comment %} ğŸ“± Mobile optimization {% endcomment %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="format-detection" content="telephone=no">

{% comment %} ğŸ¨ Theme color for mobile browsers {% endcomment %}
<meta name="theme-color" content="#ff69b4">
<meta name="msapplication-navbutton-color" content="#ff69b4">
<meta name="apple-mobile-web-app-status-bar-style" content="#ff69b4">

{% comment %} ğŸ” Additional structured data for Fashion categories {% endcomment %}
{% if target_keywords contains 'åœ°é›·ç³»' or target_keywords contains 'jiraikei' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "{{ seo_title }}",
  "description": "{{ seo_description }}",
  "keywords": "{{ target_keywords }}",
  "inLanguage": "ja-JP",
  "about": {
    "@type": "Thing",
    "name": "åœ°é›·ç³»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³",
    "description": "åœ°é›·ç³»ã¯æ—¥æœ¬ã®è‹¥ã„å¥³æ€§ã«äººæ°—ã®ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã§ã€ç—…ã¿ã‹ã‚ã„ã„è¦ç´ ã‚’å«ã‚€å€‹æ€§çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã€‚"
  }
}
</script>
{% endif %}

{% comment %} ğŸ¯ SEO Debug Info (åªåœ¨é¢„è§ˆæ¨¡å¼ä¸‹æ˜¾ç¤º) {% endcomment %}
{% if template contains 'preview' %}
<!-- SEO Debug Info -->
<!-- Target Keywords: {{ target_keywords }} -->
<!-- SEO Title: {{ seo_title }} -->
<!-- SEO Description: {{ seo_description }} -->
<!-- Collection Handle: {{ collection_handle }} -->
{% endif %}
