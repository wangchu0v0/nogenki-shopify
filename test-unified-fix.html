<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Judge.me English/Japanese Interface Fix Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
            line-height: 1.6;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: #fafafa;
        }
        .lang-en { border-color: #007bff; background: #f0f8ff; }
        .lang-ja { border-color: #28a745; background: #f0fff0; }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .jdgm-prev-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border: 1px solid #eee;
        }
        .jdgm-star {
            color: #A889A8;
            font-size: 16px;
        }
        .jdgm-prev-badge__text {
            font-size: 14px;
            color: #666;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.pending { background: #fff3cd; color: #856404; }
        .status.success { background: #d4edda; color: #155724; }
        .controls {
            text-align: center;
            margin: 30px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 14px;
        }
        button:hover { background: #0056b3; }
        .log {
            background: #000;
            color: #0f0;
            padding: 15px;
            font-family: 'Courier New', monospace;
            height: 200px;
            overflow-y: auto;
            border-radius: 5px;
            font-size: 12px;
            margin-top: 20px;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .before { border-left: 4px solid #dc3545; }
        .after { border-left: 4px solid #28a745; }
    </style>
    <link rel="stylesheet" href="assets/review-stars-optimized.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Judge.meè‹±è¯­/æ—¥è¯­ç•Œé¢ä¿®å¤æµ‹è¯•</h1>
        <p><strong>æµ‹è¯•ç›®çš„ï¼š</strong>éªŒè¯è‹±è¯­ç•Œé¢reviewsæ˜¾ç¤ºé—®é¢˜å·²ä¿®å¤ï¼ŒåŒæ—¶æ—¥è¯­ç•Œé¢ä¿æŒæ­£å¸¸ã€‚</p>
        
        <div class="controls">
            <button onclick="testEnglishInterface()">ğŸ‡ºğŸ‡¸ æµ‹è¯•è‹±è¯­ç•Œé¢</button>
            <button onclick="testJapaneseInterface()">ğŸ‡¯ğŸ‡µ æµ‹è¯•æ—¥è¯­ç•Œé¢</button>
            <button onclick="testMixedContent()">ğŸŒ æµ‹è¯•æ··åˆå†…å®¹</button>
            <button onclick="simulateDynamicLoad()">âš¡ æ¨¡æ‹ŸåŠ¨æ€åŠ è½½</button>
            <button onclick="clearLog()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
        </div>
    </div>

    <!-- è‹±è¯­ç•Œé¢æµ‹è¯• -->
    <div class="container">
        <div class="test-section lang-en">
            <div class="test-title">ğŸ‡ºğŸ‡¸ English Interface Tests</div>
            
            <div class="before-after">
                <div class="before">
                    <h4>ä¿®å¤å‰ (Before)</h4>
                    <div class="jdgm-prev-badge">
                        <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜…</span>
                        <span class="jdgm-prev-badge__text">23 reviews</span>
                        <span class="status pending">æœªä¿®å¤</span>
                    </div>
                    <div class="jdgm-prev-badge">
                        <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                        <span class="jdgm-prev-badge__text">156 customer reviews</span>
                        <span class="status pending">æœªä¿®å¤</span>
                    </div>
                    <div class="jdgm-prev-badge">
                        <span class="jdgm-star">â˜…â˜…â˜…â˜†â˜†</span>
                        <span class="jdgm-prev-badge__text">Based on 89 reviews</span>
                        <span class="status pending">æœªä¿®å¤</span>
                    </div>
                </div>
                
                <div class="after">
                    <h4>ä¿®å¤å (After - åº”è¯¥æ˜¾ç¤ºä¸ºæ‹¬å·æ ¼å¼)</h4>
                    <div id="english-test-area">
                        <!-- åŠ¨æ€å†…å®¹å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ—¥è¯­ç•Œé¢æµ‹è¯• -->
    <div class="container">
        <div class="test-section lang-ja">
            <div class="test-title">ğŸ‡¯ğŸ‡µ Japanese Interface Tests</div>
            
            <div class="before-after">
                <div class="before">
                    <h4>ä¿®å¤å‰ (Before)</h4>
                    <div class="jdgm-prev-badge">
                        <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜…</span>
                        <span class="jdgm-prev-badge__text">15ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                        <span class="status pending">æœªä¿®å¤</span>
                    </div>
                    <div class="jdgm-prev-badge">
                        <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                        <span class="jdgm-prev-badge__text">7ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                        <span class="status pending">æœªä¿®å¤</span>
                    </div>
                </div>
                
                <div class="after">
                    <h4>ä¿®å¤å (After - åº”è¯¥æ˜¾ç¤ºä¸ºæ‹¬å·æ ¼å¼)</h4>
                    <div id="japanese-test-area">
                        <!-- åŠ¨æ€å†…å®¹å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ··åˆå†…å®¹æµ‹è¯• -->
    <div class="container">
        <div class="test-section">
            <div class="test-title">ğŸŒ Mixed Language Content Test</div>
            <div id="mixed-test-area">
                <!-- æ··åˆè¯­è¨€å†…å®¹æµ‹è¯•åŒºåŸŸ -->
            </div>
        </div>
    </div>

    <!-- åŠ¨æ€åŠ è½½æµ‹è¯• -->
    <div class="container">
        <div class="test-section">
            <div class="test-title">âš¡ Dynamic Loading Test</div>
            <p>æµ‹è¯•åŠ¨æ€æ·»åŠ çš„Judge.meå†…å®¹æ˜¯å¦èƒ½è¢«æ­£ç¡®å¤„ç†</p>
            <div id="dynamic-test-area">
                <!-- åŠ¨æ€å†…å®¹å°†åœ¨è¿™é‡Œæ·»åŠ  -->
            </div>
        </div>
    </div>

    <!-- æ—¥å¿—åŒºåŸŸ -->
    <div class="container">
        <div class="test-section">
            <h3>ğŸ“Š å®æ—¶æ—¥å¿—</h3>
            <div id="console-log" class="log"></div>
        </div>
    </div>

    <script src="assets/judgeme-unified-fix.js"></script>
    <script>
        // æ§åˆ¶å°é‡å®šå‘
        const logContainer = document.getElementById('console-log');
        const originalLog = console.log;
        let logCount = 0;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const div = document.createElement('div');
            div.style.margin = '2px 0';
            div.textContent = `[${new Date().toLocaleTimeString()}] ${args.join(' ')}`;
            logContainer.appendChild(div);
            logContainer.scrollTop = logContainer.scrollHeight;
            
            logCount++;
            if (logCount > 100) {
                logContainer.removeChild(logContainer.firstChild);
                logCount--;
            }
        };

        // æµ‹è¯•å‡½æ•°
        function testEnglishInterface() {
            console.log('ğŸ‡ºğŸ‡¸ å¼€å§‹æµ‹è¯•è‹±è¯­ç•Œé¢...');
            const testArea = document.getElementById('english-test-area');
            testArea.innerHTML = `
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜…</span>
                    <span class="jdgm-prev-badge__text">23 reviews</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                    <span class="jdgm-prev-badge__text">156 customer reviews</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜†â˜†</span>
                    <span class="jdgm-prev-badge__text">Based on 89 reviews</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                    <span class="jdgm-prev-badge__text">12 verified reviews</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
            `;
            
            // ç»™JSæ—¶é—´å¤„ç†
            setTimeout(() => {
                updateTestStatus();
            }, 1000);
        }

        function testJapaneseInterface() {
            console.log('ğŸ‡¯ğŸ‡µ å¼€å§‹æµ‹è¯•æ—¥è¯­ç•Œé¢...');
            const testArea = document.getElementById('japanese-test-area');
            testArea.innerHTML = `
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜…</span>
                    <span class="jdgm-prev-badge__text">15ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                    <span class="jdgm-prev-badge__text">7ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
                <div class="jdgm-prev-badge">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜†â˜†</span>
                    <span class="jdgm-prev-badge__text">23ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                    <span class="status pending">å¤„ç†ä¸­</span>
                </div>
            `;
            
            setTimeout(() => {
                updateTestStatus();
            }, 1000);
        }

        function testMixedContent() {
            console.log('ğŸŒ å¼€å§‹æµ‹è¯•æ··åˆè¯­è¨€å†…å®¹...');
            const testArea = document.getElementById('mixed-test-area');
            testArea.innerHTML = `
                <div class="jdgm-prev-badge" style="margin: 10px 0;">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜…</span>
                    <span class="jdgm-prev-badge__text">45 reviews</span>
                    <span class="status pending">è‹±è¯­</span>
                </div>
                <div class="jdgm-prev-badge" style="margin: 10px 0;">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                    <span class="jdgm-prev-badge__text">33ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                    <span class="status pending">æ—¥è¯­</span>
                </div>
                <div class="jdgm-prev-badge" style="margin: 10px 0;">
                    <span class="jdgm-star">â˜…â˜…â˜…â˜†â˜†</span>
                    <span class="jdgm-prev-badge__text">18 avis</span>
                    <span class="status pending">æ³•è¯­</span>
                </div>
            `;
            
            setTimeout(() => {
                updateTestStatus();
            }, 1000);
        }

        function simulateDynamicLoad() {
            console.log('âš¡ æ¨¡æ‹ŸåŠ¨æ€åŠ è½½Judge.meå†…å®¹...');
            const testArea = document.getElementById('dynamic-test-area');
            
            // æ¨¡æ‹ŸAJAXåŠ è½½
            setTimeout(() => {
                const newContent = document.createElement('div');
                newContent.className = 'jdgm-prev-badge';
                newContent.style.margin = '10px 0';
                newContent.innerHTML = `
                    <span class="jdgm-star">â˜…â˜…â˜…â˜…â˜†</span>
                    <span class="jdgm-prev-badge__text">${Math.floor(Math.random() * 100) + 1} reviews</span>
                    <span class="status pending">åŠ¨æ€åŠ è½½</span>
                `;
                testArea.appendChild(newContent);
                
                setTimeout(() => {
                    updateTestStatus();
                }, 500);
            }, 500);
        }

        function updateTestStatus() {
            const allBadges = document.querySelectorAll('.jdgm-prev-badge__text');
            allBadges.forEach(badge => {
                const statusEl = badge.parentElement.querySelector('.status');
                if (statusEl) {
                    const text = badge.textContent.trim();
                    if (text.match(/^\(\d+\)$/)) {
                        statusEl.textContent = 'âœ… å·²ä¿®å¤';
                        statusEl.className = 'status success';
                    } else {
                        statusEl.textContent = 'âŒ æœªä¿®å¤';
                        statusEl.className = 'status pending';
                    }
                }
            });
        }

        function clearLog() {
            logContainer.innerHTML = '';
            logCount = 0;
            console.log('ğŸ—‘ï¸ æ—¥å¿—å·²æ¸…ç©º');
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–æµ‹è¯•...');
            setTimeout(() => {
                console.log('ğŸ” æ£€æŸ¥Judge.meç»Ÿä¸€ä¿®å¤å™¨çŠ¶æ€...');
                if (window.judgemeUnifiedFix) {
                    console.log('âœ… Judge.meç»Ÿä¸€ä¿®å¤å™¨å·²åŠ è½½');
                    console.log(`ğŸ“Š å½“å‰è¯­è¨€æ£€æµ‹: ${window.judgemeUnifiedFix.language()}`);
                } else {
                    console.log('âŒ Judge.meç»Ÿä¸€ä¿®å¤å™¨æœªåŠ è½½');
                }
            }, 1000);
        });

        // ç›‘å¬ä¿®å¤å™¨çš„å¤„ç†è¿‡ç¨‹
        setInterval(() => {
            if (window.judgemeUnifiedFix) {
                const count = window.judgemeUnifiedFix.count();
                const processed = window.judgemeUnifiedFix.processed();
                if (count > 0) {
                    console.log(`ğŸ“ˆ ç»Ÿè®¡: å·²ä¿®å¤${count}ä¸ªå…ƒç´ ï¼Œå¤„ç†${processed}ä¸ªç‹¬ç‰¹å…ƒç´ `);
                }
            }
        }, 5000);
    </script>
</body>
</html>
